@using BigEshop.Application.Extensions
@using BigEshop.Application.Statics
@using BigEshop.Domain.Enums.Product
@using BigEshop.Domain.ViewModels.ProductComment
@using BigEshop.Domain.ViewModels.ProductQuestion
@model BigEshop.Domain.ViewModels.Product.ClientProductDetailsViewModel

@{
    ViewData["Title"] = "جزییات محصول";
}

<div class="bread-crumb py-4">
    <div class="container-fluid">
        <nav aria-label="breadcrumb" class="my-lg-0 my-2">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a class="font-14 text-muted-two" href="/">خانه</a></li>
                <li class="breadcrumb-item"><a class="font-14 text-muted-two">@Model.ProductCategory?.Title</a></li>
                <li aria-current="page" class="breadcrumb-item active main-color-one-color font-14 fw-bold">
                     @Model.Title
                </li>
            </ol>
        </nav>
    </div>
</div>

<div class="content">
    <div class="container-fluid">
        <div class="content-box">
            <div class="container-fluid">
                <div class="row gy-3">
                    <div class="col-lg-4">
                        <div class="amazing-timer">
                            <div class="d-flex align-items-center flex-wrap">
                                <div class="d-grid gap-1">
                                    <span class="font-14">
                                        پیشنـهاد شگفت انگیـز
                                    </span>
                                    <span class="font-12 text-muted">فرصت باقی مانده</span>
                                </div>
                                <div class="flex-grow-1 text-end">
                                    <div class="countdown" data-date="2027-01-01" data-time="18:30"><div class="countdown-container seconds"><span class="countdown-value seconds-bottom">25</span><span class="countdown-heading seconds-top">ثانیه</span></div><div class="countdown-container minutes"><span class="countdown-value minutes-bottom">27</span><span class="countdown-heading minutes-top">دقیقه</span></div><div class="countdown-container hours"><span class="countdown-value hours-bottom">19</span><span class="countdown-heading hours-top">ساعت</span></div><div class="countdown-container days"><span class="countdown-value days-bottom">807</span><span class="countdown-heading days-top">روز</span></div></div>
                                </div>
                            </div>
                        </div>
                         @if(Model.ProductGalleries != null && Model.ProductGalleries.Any())
                         {
                         <div class="pro_gallery">
                            <div class="swiper product-gallery swiper-initialized swiper-horizontal swiper-rtl swiper-backface-hidden">
                                <div class="swiper-wrapper" title="برای بزرگنمایی تصویر دابل کلیک کنید" id="swiper-wrapper-8aeae7cf65784e65" aria-live="polite">
                                    
                                    <div class="swiper-slide swiper-slide-active" role="group" aria-label="1 / 6" style="width: 381px; margin-left: 10px;">
                                         <div class="swiper-zoom-container">
                                              <img class="img-fluid" src="@PathTools.ProductImagePath@Model.Image" alt="@Model.Title">
                                          </div>
                                     </div>
                         
                                        @foreach(var productGallery in Model.ProductGalleries)
                                        {
                                        <div class="swiper-slide swiper-slide-active" role="group" aria-label="album_@productGallery.Id" style="width: 381px; margin-left: 10px;">
                                            <div class="swiper-zoom-container">
                                                <img class="img-fluid" src="@PathTools.ProductGalleryImagePath@productGallery.ImageName" alt="@productGallery.ImageTitle">
                                            </div>
                                        </div>
                                        }
                                    
                                </div>
                                <div class="swiper-button-next d-none d-lg-flex" tabindex="0" role="button" aria-label="Next slide" aria-controls="swiper-wrapper-8aeae7cf65784e65" aria-disabled="false"></div>
                                <div class="swiper-button-prev d-none d-lg-flex swiper-button-disabled" tabindex="-1" role="button" aria-label="Previous slide" aria-controls="swiper-wrapper-8aeae7cf65784e65" aria-disabled="true"></div>
                                <div class="swiper-pagination d-none d-lg-block swiper-pagination-clickable swiper-pagination-bullets swiper-pagination-horizontal"><span class="swiper-pagination-bullet swiper-pagination-bullet-active" tabindex="0" role="button" aria-label="Go to slide 1" aria-current="true"></span><span class="swiper-pagination-bullet" tabindex="0" role="button" aria-label="Go to slide 2"></span><span class="swiper-pagination-bullet" tabindex="0" role="button" aria-label="Go to slide 3"></span><span class="swiper-pagination-bullet" tabindex="0" role="button" aria-label="Go to slide 4"></span><span class="swiper-pagination-bullet" tabindex="0" role="button" aria-label="Go to slide 5"></span><span class="swiper-pagination-bullet" tabindex="0" role="button" aria-label="Go to slide 6"></span></div>
                                <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
                            </div>
                            <div class="swiper product-gallery-thumb swiper-initialized swiper-horizontal swiper-free-mode swiper-rtl swiper-watch-progress swiper-backface-hidden swiper-thumbs" thumbsslider="">
                                <div class="swiper-wrapper" id="swiper-wrapper-bf2fce377b81310101" aria-live="polite" style="transform: translate3d(0px, 0px, 0px);">

                                    <div class="swiper-slide swiper-slide-visible swiper-slide-fully-visible swiper-slide-active swiper-slide-thumb-active" role="group" aria-label="1 / 6" style="width: 122.333px; margin-left: 10px;">
                                        <img class="img-fluid" src="@PathTools.ProductImagePath@Model.Image" alt="@Model.Title">
                                    </div>

                                    @foreach(var productGallery in Model.ProductGalleries)
                                    {
                                         <div class="swiper-slide swiper-slide-next" role="group" aria-label="album_@productGallery.Id" style="width: 122.333px; margin-left: 10px;">
                                            <img class="img-fluid" src="@PathTools.ProductGalleryImagePath@productGallery.ImageName" alt="@productGallery.ImageTitle">
                                        </div>
                                    }
                                   
                                </div>
                                <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
                            </div>
                            <div class="icon-product-box mt-3 btn-group w-100">
                                <div class="icon-product-box-item btn btn-lg bg-secondary-subtle py-4" data-bs-placement="top" data-bs-target="#shareModal" data-bs-toggle="modal" aria-label="اشتراک گذاری" data-bs-original-title="اشتراک گذاری">
                                    <i class="bi bi-share fs-4"></i>
                                </div>
                                <div class="icon-product-box-item btn btn-lg bg-secondary-subtle py-4" data-bs-placement="top" data-bs-title="افزودن به علاقه مندی" data-bs-toggle="tooltip">
                                    <i class="bi bi-heart fs-4"></i>
                                </div>
                                <div class="icon-product-box-item btn btn-lg bg-secondary-subtle py-4" data-bs-placement="top" data-bs-title="مقایسه محصول" data-bs-toggle="tooltip">
                                    <i class="bi bi-arrow-left-right fs-4"></i>
                                </div>
                                <div class="icon-product-box-item btn btn-lg bg-secondary-subtle py-4" data-bs-placement="top" data-bs-target="#chartModal" data-bs-toggle="modal" aria-label="نمودار تغییر قیمت" data-bs-original-title="نمودار تغییر قیمت">
                                    <i class="bi bi-bar-chart fs-4"></i>
                                </div>
                            </div>
                        </div>
                         }
                    </div>
                    <div class="col-lg-8">
                        <div class="product-meta-title mb-0">
                            <div class="row align-items-center gy-3">
                                <div class="col-lg-10">
                                    <h4 class="mb-0"><a href="" class="main-color-one-color h6">گوشی موبایل</a></h4>
                                    <h4 class="f-800 my-1">
                                        @Model.Title
                                    </h4>
                                    <p class="text-muted">
                                        Samsung smart watch model Galaxy Watch3 SM-R840 45mm
                                        leather strap
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="product-meta-feature mt-1">
                            <div class="product-meta-details">
                                <nav class="navbar navbar-expand">
                                    <ul class="navbar-nav flex-wrap">
                                        <li class="nav-item">
                                            <a href="" class="nav-link ps-0">
                                                <span class="badge bg-secondary font-14">4.50 <i class="bi bi-star-fill font-14 float-start me-1"></i></span>
                                                <span class="ms-1 font-16"> از 4 رای</span>
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <div class="nav-link">
                                                <a href="" class="main-color-one-color font-16">@Model.ProductComments?.Where(p => p.Status == ProductCommentStatus.Confirmed).Count() دیدگاه</a>
                                                <a href="" class="ms-2 main-color-one-color font-16">@Model.ProductQuestions?.Count() پرسش</a>
                                            </div>
                                        </li>
                                        <li class="nav-item">
                                            <a href="" class="nav-link font-16 text-muted"><span class="fw-bold font-16">شناسه محصول:</span> apple-13pak#-2</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                            <div class="row gy-3">
                                <div class="col-lg-7">
                                    @if (Model.ProductFeatures != null && Model.ProductFeatures.Any())
                                    {
                                    <div class="product-meta-feature-items">
                                            <h5 class="title font-16">ویژگی های کالا</h5>
                                            <div class="se-desc">
                                                <input type="checkbox" class="read-more-state" id="readMore1">
                                                <ul class="read-more-wrap navbar-nav">
                                                    @foreach(var feature in Model.ProductFeatures.OrderByDescending(pf => pf.Order).Take(4))
                                                    {
                                                         <li>
                                                            <span class="title">@feature?.Feature?.Title :</span>
                                                            <span class="desc">@feature?.FeatureValue</span>
                                                        </li>
                                                    }
                                                </ul>
                                                <label for="readMore1" class="read-more-trigger"></label>
                                            </div>
                                    </div>
                                    }
                                    @if (Model.ProductColors != null && Model.ProductColors.Any())
                                    {
                                        var firstColor = Model.ProductColors.FirstOrDefault();

                                        <div class="product-meta-color">
                                        <h5 class="font-16">
                                            انتخاب رنگ کالا
                                        </h5>
                                        <div class="product-meta-color-items">

                                            @foreach(var color in Model.ProductColors)
                                            {
                                                <input autocomplete="off" @(color.Id == firstColor?.Id ? "checkrd" : "") class="btn-check" id="productColor_@color.Id" name="options" type="radio">
                                                <label class="btn " for="productColor_@color.Id" onclick="changeProductColor('@color.Id')">
                                                    <span style="background-color: @color.Color;"></span>
                                                   @color.ColorTitle
                                                </label>
                                            }
                                            
                                        </div>
                                    </div>
                                    }
                                   
                                    <div class="product-box-size pro-var-responsive">
                                        <h5 class="font-16 my-2">
                                            انتخاب سایز کالا
                                        </h5>
                                        <ul>
                                            <li><a class="active" href="">40</a></li>
                                            <li><a href="">41</a></li>
                                            <li><a href="">42</a></li>
                                            <li><a href="">43</a></li>
                                        </ul>
                                    </div>
                                    <div class="product-alert">
                                        <i class="bi bi-info-circle-fill me-1"></i>
                                        <span>امکان برگشت کالا با دلیل "انصراف از خرید" تنها در صورتی مورد قبول است که پلمب کالا باز نشده باشد.</span>
                                    </div>
                                    <div class="product-alert mt-2">
                                        <i class="bi bi-check-circle me-1"></i>
                                        <span>
                                            از سه روش زیر می‌توان با سامانه همتا ارتباط برقرار نموده و فرآیند فعال سازی دستگاه موبایل را انجام داد: 1. کد دستوری #۷۷۷۷* 2. اپلیکشین همتا 3. سایت اینترنتی به آدرس www.hamta.ntsw.ir
                                        </span>
                                    </div>
                                </div>
                                <div class="col-lg-5">
                                    <div class="product-meta-info">
                                        <div class="product-meta-info-title border-0 product-meta-info-item d-flex align-items-center justify-content-between">
                                            <h5>فروشنده</h5>
                                            <a class="main-color-two-color fw-bold" href="">3 فروشنده دیگر</a>
                                        </div>
                                        <div class="d-flex product-meta-info-item">
                                            <div>
                                                <i class="bi bi-shop"></i>
                                            </div>
                                            <div class="text-start ms-3">
                                                <h6 class="fw-bold text-muted-2 font-16">رستا گالری</h6>
                                                <div class="d-flex align-items-center mt-2">
                                                    <p class="font-12 mb-0">
                                                        <span class="text-success ms-1 fw-bold">89.6%</span>
                                                        <span class="text-muted">رضایت از کالا</span>
                                                    </p>
                                                    <p class="ps-1 mb-0 ms-1 border-start font-12">
                                                        <span class="text-muted">عملکرد</span>
                                                        <span class="text-success fw-bold">عالی</span>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="product-meta-rating product-meta-info-item">
                                            <div class="d-flex align-items-center">
                                                <div class="count-comment text-muted">16 دیدگاه</div>
                                                <div class="count-rating">
                                                    <span>(17) 4.5</span>
                                                    <i class="bi bi-star-fill"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="product-meta-garanty product-meta-info-item justify-content-start">
                                            <i class="bi bi-shield-check"></i>
                                            <span class="text-muted">
                                                گارانتی اصالت و سلامت فیزیکی کالا
                                            </span>
                                        </div>
                                        <div class="product-meta-price product-price d-flex justify-content-between align-items-center">
                                            <del class="font-14">@Model.Price.ToMoney() تومان </del>
                                            <h6 class="title-font new-price" id="product-price-one">@Model.Price.ToMoney() تومان</h6>
                                        </div>
                                        <div class="d-flex justify-content-between flex-wrap">
                                            <div class="product-meta-counter w-100">
                                                 <div class="product-meta-counter w-100">
                                                    <div class="counter">
                                                        <input class="counter" name="count" type="text" value="1">
                                                    </div>
                                                 </div>
                                            </div>
                                            <div class="product-meta-add mt-3 w-100">
                                                <div class="d-flex justify-content-center">
                                                    <a class="btn btn-lg w-100 border-0 main-color-three-bg" href="">
                                                        <i class="bi bi-basket text-white font-20 me-1"></i>خرید
                                                        کالا
                                                    </a>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="product-meta-best-price mt-1">
                                        <a href="" class="d-block">
                                            <i class="bi bi-bell me-1"></i>
                                            آیا قیمت بهتری سراغ دارید؟
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="product-feature">
                            <nav class="navbar navbar-expand">
                                <ul class="navbar-nav flex-wrap justify-content-between w-100">
                                    <li class="nav-item">
                                        <a href="" class="nav-link">
                                            <img src="assets/img/delivery.png" alt=""><p>تحویل اکسپرس</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="" class="nav-link">
                                            <img src="assets/img/1-1.png" alt=""><p>پشتیبانی 24 ساعته</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="" class="nav-link">
                                            <img src="assets/img/2-4.png" alt=""><p>پرداخت در محل</p>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="" class="nav-link">
                                            <img src="assets/img/3-1.png" alt=""><p>7 روز ضمانت بازگشت کالا</p>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<partial name="_ProductSuppliers"/>

<!-- start product desc -->

<div class="product-desc py-20">
    <div class="container-fluid">
        <div class="row gy-3">
            <div class="col-lg-9">
                <div class="product-desc-tab">
                    <ul class="nav justify-content-center" id="productTab" role="tablist">
                        <li class="nav-item">
                            <button aria-selected="true" class="active waves-effect waves-light"
                                    data-bs-target="#productDescLess-pane" data-bs-toggle="tab" id="productDescLess"
                                    role="button" type="button">
                                توضیحات کالا
                            </button>
                        </li>
                        <li class="nav-item">
                            <button aria-selected="true" class=" waves-effect waves-light"
                                    data-bs-target="#productDesc-pane" data-bs-toggle="tab" id="productDesc"
                                    role="button" type="button">
                                مشخصات کالا
                            </button>
                        </li>
                        <li class="nav-item">
                            <button aria-selected="false" class=" waves-effect waves-light"
                                    data-bs-target="#productTable-pane" data-bs-toggle="tab" id="productTable"
                                    role="button" type="button">
                                توضیحات تکمیلی
                            </button>
                        </li>
                        <li class="nav-item">
                            <button aria-selected="false" class="d-flex waves-effect waves-light"
                                    data-bs-target="#productComment-pane" data-bs-toggle="tab" id="productComment"
                                    role="button" type="button">
                                نظرات <span class="badge main-color-two-bg ms-2 lh-sm">@(Model.ProductComments?.Where(p => p.Status == ProductCommentStatus.Confirmed).Count() ?? 0)</span>
                            </button>
                        </li>
                        <li class="nav-item">
                            <button aria-selected="false" class="d-flex waves-effect waves-light"
                                    data-bs-target="#productAnswer-pane" data-bs-toggle="tab" id="productAnswer"
                                    role="button" type="button">
                                پرسش و پاسخ <span class="badge main-color-two-bg ms-2 lh-sm">@((Model.ProductQuestions?.Count() + Model.ProductAnswers?.Count()) ?? 0)</span>
                            </button>
                        </li>
                    </ul>
                </div>
                <div class="content-box">
                    <div class="container-fluid">
                        <div class="product-descs" id="prodesc">
                            <div class="product-desc">
                                <div class="product-desc-tab-content">
                                    <div class="tab-content" id="productTabContent">
                                        <div class="tab-pane fade show active product-desc-less-contents"
                                             id="productDescLess-pane">
                                            <div class="product-desc-content">
                                                <h6 class="font-22 mb-2 title-font title-line-bottom">معرفی محصول</h6>
                                                <p>
                                                    @Model.Review
                                                </p>
                                            </div>
                                        </div>
                                        <div class="tab-pane fade product-desc-contents" id="productDesc-pane">
                                            <div class="product-desc-content">
                                                <input class="read-more-state" id="readMore2" type="checkbox" />
                                                <!-- والد بیشتر ، کمتر ، تمام متن توضیحات باید داخل این تگ قرار بگیرند -->
                                                <div class="read-more-wrap">
                                                    
                                                    @Model.Description
                                                    <!-- متن بیشتر -->
                                                    <div class="read-more-target">
                                                    
                                                    </div>
                                                    <!-- پایان متن بیشتر -->

                                                </div>
                                                <!-- پایان والد بیشتر کمتر -->
                                                <label class="read-more-trigger" for="readMore2"></label>
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="productTable-pane">
                                            <div aria-labelledby="#productTable"
                                                 class="tab-pane fade active show" role="tabpanel">
                                                <h6 class="font-26 mb-2 title-font title-line-bottom">مشخصات فنی</h6>
                                                <div class="box_list mt-4">
                                                    @if (Model.ProductFeatures != null && Model.ProductFeatures.Any())
                                                    {
                                                        <p class="title">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16"
                                                                 height="16" fill="currentColor"
                                                                 class="bi bi-caret-left-fill" viewBox="0 0 16 16">
                                                                <path d="m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z">
                                                                </path>
                                                            </svg>مشخصات کلی
                                                        </p>
                                                        <div>
                                                            <ul class="param_list list-inline">
                                                                @foreach (var feature in Model.ProductFeatures.OrderByDescending(pf => pf.Order))
                                                                {
                                                                    <li class="list-inline-item col-md-3 pe-md-1 pe-md-3 p-0 m-0">
                                                                        <div class="box_params_list">
                                                                            <p class="block border_right_custom1">
                                                                                @feature?.Feature?.Title
                                                                            </p>
                                                                        </div>
                                                                    </li>
                                                                    <li class="list-inline-item col-md-8 p-0 m-0">
                                                                        <div class="box_params_list">
                                                                            <p class="block border_right_custom2">
                                                                                @feature?.FeatureValue
                                                                            </p>
                                                                        </div>
                                                                    </li>
                                                                }
                                                            </ul>
                                                        </div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
<!-- start product comment -->
                                        <div class="tab-pane fade product-comment-content" id="productComment-pane">

                                            <div class="comment-form">
                                                <h6 class="font-26 mb-2 title-font title-line-bottom">
                                                    نظرت در مورد این محصول
                                                    چیه؟
                                                </h6>
                                                <p class="font-14 text-muted mt-2">
                                                    برای ثبت نظر، از طریق دکمه افزودن
                                                    دیدگاه جدید
                                                    نمایید. اگر این محصول را قبلا خریده باشید، نظر شما به عنوان خریدار
                                                    ثبت خواهد
                                                    شد.
                                                </p>
                                                <partial name="_AddProductComment" model="@(new CreateProductCommentViewModel() { ProductId = Model.Id })" />
                                            </div>

                                            <div class="box_filter mt-5 pb-3">
                                                <div class="row align-items-end">
                                                    <div class="col-md-4 bf1">
                                                        <h4 class="title-font title-line-bottom">نظرات کاربران</h4>
                                                    </div>
                                                    <div class="col-md-8 bf2">
                                                        <ul class="list-inline text-end mb-0">
                                                            <li class="list-inline-item title-font">مرتب سازی بر اساس :</li>
                                                            <li class="list-inline-item"><a href="#">نظر خریداران</a></li>
                                                            <li class="list-inline-item">
                                                                <a class="active_custom" href="#">
                                                                    مفیدترین
                                                                    نظرات
                                                                </a>
                                                            </li>
                                                            <li class="list-inline-item"><a href="#">جدیدترین نظرات</a></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>

                                            @await Component.InvokeAsync("ProductComment", new { productId = Model.Id })

                                            <div class="container">
                                                <div class="text-center">
                                                    <a class="btn main-color-one-bg border-0" href="">بارگذاری کامنت ها</a>
                                                </div>
                                            </div>
                                        </div>
<!-- end product comment -->
                                        <div aria-labelledby="#productAnswer" class="tab-pane fade" id="productAnswer-pane"
                                             role="tabpanel">
                                            <h4 class="title-font title-line-bottom">پرسش و پاسخ</h4>
                                            <span class="fw-bold d-block mt-2 text-muted font-12">
                                                پرسش خود را در مورد محصول مطرح
                                                نمایید
                                            </span>

                                            <div class="box_questions mt-4">

                                                <partial name="_AddProductQuestion" model="@(new CreateProductQuestionViewModel() { ProductId = Model.Id })" />

                                                <div class="box_filter mt-5 pb-3">
                                                    <div class="row align-items-end">
                                                        <div class="col-md-4 bf1">
                                                            <h4 class="title-font title-line-bottom">پرسش های کاربران</h4>
                                                        </div>
                                                        <div class="col-md-8 bf2">
                                                            <ul class="list-inline text-end mb-0">
                                                                <li class="list-inline-item title-font">مرتب سازی بر اساس :</li>
                                                                <li class="list-inline-item"><a href="#">نظر خریداران</a></li>
                                                                <li class="list-inline-item">
                                                                    <a class="active_custom" href="#">
                                                                        مفیدترین
                                                                        نظرات
                                                                    </a>
                                                                </li>
                                                                <li class="list-inline-item"><a href="#">جدیدترین نظرات</a></li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="box_questions mt-4">

                                                 @if (Model.ProductQuestions != null && Model.ProductQuestions.Any()) 
                                                 {
                                                     @await Component.InvokeAsync("ProductQuestion", new { productId = Model.Id })
                                                 }

                                                 @if (Model.ProductAnswers != null && Model.ProductAnswers.Any())
                                                 {
                                                    @await Component.InvokeAsync("ProductAnswerToQuestion", new { questionId = Model.ProductQuestions?.FirstOrDefault()?.Id })
                                                 }
                                                 
                                                </div>

                                                <div class="container mt-4">
                                                    <div class="text-center">
                                                        <a class="btn main-color-one-bg border-0" href="">بارگذاری کامنت ها</a>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 d-lg-block d-none">
                <div class="product-meta-info bg-white position-sticky top-0">
                    <div class="product-meta-info-title border-0 product-meta-info-item d-flex align-items-center justify-content-between">
                        <h5>فروشنده</h5>
                        <a class="main-color-two-color fw-bold" href="">3 فروشنده دیگر</a>
                    </div>
                    <div class="d-flex product-meta-info-item">
                        <div>
                            <i class="bi bi-shop"></i>
                        </div>
                        <div class="text-start ms-3">
                            <h6 class="fw-bold text-muted-2 font-16">رستا گالری</h6>
                            <div class="d-flex align-items-center mt-2">
                                <p class="font-12 mb-0">
                                    <span class="text-success ms-1 fw-bold">89.6%</span>
                                    <span class="text-muted">رضایت از کالا</span>
                                </p>
                                <p class="ps-1 mb-0 ms-1 border-start font-12">
                                    <span class="text-muted">عملکرد</span>
                                    <span class="text-success fw-bold">عالی</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="product-meta-rating product-meta-info-item">
                        <div class="d-flex align-items-center">
                            <div class="count-comment text-muted">16 دیدگاه</div>
                            <div class="count-rating">
                                <span>(17) 4.5</span>
                                <i class="bi bi-star-fill"></i>
                            </div>
                        </div>
                    </div>
                    <div class="product-meta-garanty product-meta-info-item justify-content-start">
                        <i class="bi bi-shield-check"></i>
                        <span class="text-muted">
                            گارانتی اصالت و سلامت فیزیکی کالا
                        </span>
                    </div>
                    <div class="product-meta-price product-price d-flex justify-content-between align-items-center">
                        <del class="font-14">@Model.Price.ToMoney() تومان </del>
                        <h6 class="title-font new-price">1,200,000 تومان</h6>
                    </div>
                    <div class="d-flex justify-content-between flex-wrap">
                        <div class="product-meta-counter w-100">
                            <div class="counter">
                                <input class="counter" name="count" type="text" value="1">
                            </div>
                        </div>
                        <div class="product-meta-add mt-3 w-100">
                            <div class="d-flex justify-content-center">
                                <a class="btn btn-lg w-100 border-0 main-color-three-bg" href="">
                                    <i class="bi bi-basket text-white font-20 me-1"></i>خرید
                                    کالا
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- end product desc -->

@await Component.InvokeAsync("SimilarProduct", new {categoryId = Model.CategoryId})

@section Scripts
{
    <script>
        function changeProductColor(productColorId)
        {
            fetch(`/product/ChangeProductColor/${productColorId}`)
            .then(res => res.json()).then(data => {
                document.getElementById("product-price-two").innerText = data.price
                document.getElementById("product-price-one").innerText = data.price
            })
        }

        function LikeAction(Id, ProductId) {
            fetch(`/product/LikeAction/${Id}/${ProductId}`, {method: 'POST'})
                .then(res => res.json()).then(data => {
                    if (data.isConfirmed)
                        Swal.fire({
                            title: "عملیات موفق!",
                            text: "@TempData["SuccessMessage"]",
                            icon: "success"
                        });
                })
        }

       
    </script>
}
